<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>StoneDoor</title>
    <script src="../js/jquery-3.2.1.min.js"></script>
    <style type="text/css">
        .caiimg{
            position:absolute;
            width:100px;
            height:100px;
        }
    </style>
</head>
<body>
<div>
<div id="caid2"></div>
<img class="caiimg" src="../images/caihong.png" id="caid1" style="top:0px; left:0px" />
</div>
</body>
<script type="text/javascript">
    $(function(){
        var x=0,y=0;
        $(document).mousedown(function(event){
            x=event.clientX-window.innerWidth*0.16-25;
            y=event.clientY-window.innerHeight*0.33-25;
            window.clearInterval(timer);
            move();
        });
        $(document).mouseup(function(){
            timer=window.setInterval(move,1000);
        });
        function move(){
            var height=window.innerHeight*0.67;
            var width=window.innerWidth*0.84;
            if(x==0&&y==0){
                x=parseInt(Math.random()*(width-100));
                y=parseInt(Math.random()*(height-100));
            }
            $("#caid1").stop().animate({left:+x+'px',top:+y+'px'},1000);
            x=0;
            y=0;
        }
        var timer=window.setInterval(move,1000);
    });
    $(function(){
        function add(){
            var x=$("#caid1").offset().left-window.innerWidth*0.16+18;
            var y=$("#caid1").offset().top-window.innerHeight*0.33+25;

            $("#caid2").append("<img class='caiimg' src='../images/caihong.png' style='left:"+x+"px; top:"+y+"px'/>");
            $("#caid2 img").animate({width:'0px',height:'0px',top:'-=10px',left:'+=50px'},500);
            var l=$("#caid2 img").length;
            if(l>100){
                $("#caid2 img:lt(80)").remove();
            }
        }
        window.setInterval(add,10);
    });

</script>

</html>
